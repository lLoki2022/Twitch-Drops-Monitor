<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitch Drops Monitor</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
        </svg>
        <span>Twitch Drops Monitor</span>
      </div>
      <button class="icon-btn" id="settingsBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
      </button>
    </header>

    <!-- Auth Section -->
    <section id="authSection">
      <div id="authStatus" class="auth-status">
        <span>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...</span>
      </div>
      <div id="headersStatus" class="headers-status"></div>
    </section>

    <!-- Main Content -->
    <main id="mainContent" class="hidden">
      <!-- Monitoring Toggle -->
      <section class="section">
        <div class="toggle-row">
          <span>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥—Ä–æ–ø–æ–≤</span>
          <label class="toggle">
            <input type="checkbox" id="monitoringToggle" checked>
            <span class="slider"></span>
          </label>
        </div>
        
        <div class="slider-row">
          <label>–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏:</label>
          <input type="range" id="intervalSlider" min="5" max="60" value="15">
          <span id="intervalValue">15 –º–∏–Ω.</span>
        </div>
      </section>

      <!-- Game Selection -->
      <section class="section">
        <h3>–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∏–≥—Ä—ã <span class="badge" id="gamesCount">0</span></h3>
        <div class="search-container">
          <input type="text" id="gameSearch" placeholder="–ü–æ–∏—Å–∫ –∏–≥—Ä—ã...">
          <div id="searchResults" class="search-results hidden"></div>
        </div>
        <div id="selectedGames" class="selected-games">
          <p class="empty-message">–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä</p>
        </div>
      </section>

      <!-- Auto-Farm Section -->
      <section class="section farming-section">
        <h3>üéÆ –ê–≤—Ç–æ-—Ñ–∞—Ä–º –¥—Ä–æ–ø–æ–≤</h3>
        
        <div id="farmingInactive">
          <select id="farmGameSelect" class="game-select">
            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É --</option>
          </select>
          <button id="startFarmBtn" class="btn btn-primary" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
            –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞—Ä–º
          </button>
        </div>
        
        <div id="farmingActive" class="hidden">
          <div class="farming-info">
            <div class="farming-row">
              <span>–ò–≥—Ä–∞:</span>
              <strong id="farmingGameName">-</strong>
            </div>
            <div class="farming-row">
              <span>–°—Ç—Ä–∏–º–µ—Ä:</span>
              <a id="farmingStreamerLink" href="#" target="_blank">-</a>
            </div>
            <div class="farming-row">
              <span>–í—Ä–µ–º—è:</span>
              <span id="farmingTime">0 –º–∏–Ω.</span>
            </div>
            <div class="farming-row">
              <span>Watch —Å–æ–±—ã—Ç–∏—è:</span>
              <span id="farmingWatchCount">0</span>
              <span id="farmingWatchStatus" class="watch-status"></span>
            </div>
            <div class="farming-row">
              <span>–ü–æ–ª—É—á–µ–Ω–æ:</span>
              <span id="farmingClaimed">0 –¥—Ä–æ–ø–æ–≤, 0 –ø–æ–∏–Ω—Ç–æ–≤</span>
            </div>
          </div>
          
          <div id="farmingProgress" class="farming-progress">
            <p class="empty-message">–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...</p>
          </div>
          
          <button id="stopFarmBtn" class="btn btn-danger">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <rect x="6" y="6" width="12" height="12"/>
            </svg>
            –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞—Ä–º
          </button>
        </div>
      </section>

      <!-- Actions -->
      <section class="section actions">
        <button id="checkNowBtn" class="btn btn-primary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 4 23 10 17 10"/>
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
          </svg>
          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å
        </button>
        <button id="historyBtn" class="btn btn-secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          –ò—Å—Ç–æ—Ä–∏—è
        </button>
      </section>

      <!-- Status -->
      <div class="status-bar">
        <span id="statusText">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</span>
      </div>
    </main>

    <!-- History Modal -->
    <div id="historyModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>–ò—Å—Ç–æ—Ä–∏—è –¥—Ä–æ–ø–æ–≤</h3>
          <button id="closeHistoryBtn" class="close-btn">&times;</button>
        </div>
        <div id="historyList" class="history-list">
          <p class="empty-message">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>
        </div>
      </div>
    </div>
  </div>

<!-- Footer -->
<footer style="margin-top: 12px; text-align: center; font-size: 12px; opacity: 0.8;">
<div>
  üí∞ –î–æ–Ω–∞—Ç —á–µ—Ä–µ–∑ FKwallet:<br>
  –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞: <strong>F7202574545694452</strong><br>
  –î–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∑–∞–π–¥–∏—Ç–µ –Ω–∞ <a href="https://fkwallet.com" target="_blank" rel="noopener">FKwallet.com</a>
</div>

   <div>
    –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:
    <a href="https://t.me/Tolarc" target="_blank" rel="noopener">
      @Tolarc
    </a>
  </div>
</footer>

  <script src="popup.js" type="module"></script>
</body>
</html>
